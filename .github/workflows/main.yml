jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Set up Java
        uses: actions/setup-java@v3
        with:
          java-version: '17'
          distribution: 'temurin'

      - name: Build modulo openjpa-xmlstore (con test)
        run: >
          mvn clean install 
          -pl openjpa-xmlstore 
          -am 
          -Drat.skip=true 
          -Dcheckstyle.skip=true 
          -Dopenjpa.DynamicEnhancementAgent=false

      - name: Build tutto il progetto tranne openjpa-xmlstore (senza test)
        run: >
          mvn clean install 
          -DskipTests 
          -DskipITs 
          -Drat.skip=true 
          -Dcheckstyle.skip=true 
          -Dopenjpa.DynamicEnhancementAgent=false 
          -pl '!openjpa-xmlstore'

      - name: Build modulo openjpa-persistence (con test)
        run: >
          mvn clean install 
          -pl openjpa-persistence 
          -am 
          -Drat.skip=true 
          -Dcheckstyle.skip=true 
          -Dopenjpa.DynamicEnhancementAgent=false
